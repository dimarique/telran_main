# README

## Лекционное занятие №38

### Тема:

Репозитарий содержит материалы по занятию, посвященному работе с библиотекой `react-router`.

### Цели занятия
- повторение и закрепление знаний;
- решение задач.

### Что предполагается рассмотреть
На сегодняшнем занятии, предполагается рассмотреть работу с параметризованными роутами, а также рассмотреть несколько базовых хуков из библиотеки `react-router`.

### react-router
Зависимость уже добавлена в проект, поэтому можно сразу начинать работать.

### Параметризованные роуты
Очень часто возникает необходимость передать какую-то информацию между компонентами. Вариантов много - это и контекст, и подъем состояния, и библиотеки управления состояними - `Redux` (о нем позже). Но есть еще один вариант, который применяется для приложений с использованием маршрутизаторов - это передача каких-то параметров в адресе страницы.

То есть, мы скажем, что в адресе страницы зашит какой-то параметр. Чаще всего, такие штуки используются для перехода к просмотру подробной информации из общего списка. Например, есть маршрут `/products` - который ведет на страницу товаров. А есть маршрут `products/1` - он будет вести на страницу подробной информации о товаре с идентификатором 1. Соответственно, маршрут `products/2` - ведет на страницу подробной информации о товаре 2. И так далее. То есть, мы передаем идентификатор товара в адресе страницы.

Чтобы это сделать, нам предстоит 2 шага. Первый шаг - это указать параметризованный роут в нашем роутере. Второй - в компоненте воспользоватья этим параметром с помощью хука `useParams` библиотеки `react-router`.

Попробуем разобраться на примере. У нас есть компонент `src/pages/Detail`, который предполагается использовать для отображения подробной информации о чем-то. Мы хотим, чтобы эта страница рисовалась по адресу `/detail/DETAIL_ID`, где вместо DETAIL_ID будем ставить идентификатор (число). Раньше, мы бы указали роут так:

```
<Route path="/details/1" element={<Detail />} />
```

но возникает проблема - мы же не можем написать столько роутов, сколько у нас будет вариантов идентификатора. Соответственно, нам нужен параметризованный роут. Мы как бы хотим сказать "роут /details/... должен вести на страницу `Detail`, и вместо троеточия мы будем использовать произвольное значение". Для этого нам помогают динамические, или параметризованные роуты.

```
<Route path="/details/:detail_id" element={<Detail />} />
```

И такой роут гарантирует нам корректную работу.

Это был первый шаг. А теперь, нам нужно воспользоваться этим параметром в компоненте. Пока что, мы хотим просто выводить информацию об идентификаторе в параграфе. Чтобы извлечь эти данные из адреса, нам поможет хук `useParams` библиотеки `react-router`.

```
import { useParams } from 'react-router';

export default function Detail() {

  const urlParams = useParams();
  console.log('Params are: ', urlParams);

  return (
    <div>
      <h3>Detailed info about something</h3>
      <p>Here you can see a dummy text. We will add an ID here. Now id is {urlParams.detail_id}</p>
    </div>
  )
}
```

Мы можем видеть, что:
 - при переходе по адресу /details/ЛЮБОЕ_ЗНАЧЕНИЕ нам открывается страница Detail
 - далее, мы берем из адреса параметры (это объект, у которого свойствами будут те ключи, которые были указаны с символом "двоеточие" в описании роута)
 - мы используем этот параметр в компоненте так, как сочтем нужным.

### Опциональные параметры
Иногда, нам нужно сделать параметр необязятальным, т.к. он может быть, а может и не быть, и вне зависимости от его наличия/отстутствия нам нужно рендерить один и тот же компонент. Для этого, мы можем пометить параметр как необязательный:
```
<Route path="/details/:detail_id?" element={<Detail />} />
```

Вкратце, все выглядит так. Есть еще несколько дополнительных возможностей, например несколько параметров, но об этом можно почитать в документации.

**Закрепим практикой**
Сегодня мы будем писать приложение по работе с товарами интернет-магазина. Нам нужно также реализовать маршруты. На домашней странице, у нас будет список товаров. Также будет возможность фильтра по категориям, и просмотр подробной информации о товаре.

1. Начнем с создания страницы, где будут отрендерены товары. Создадим эту страницу `src/pages/ProductsPage`. Здесь нам нужно получить список товаров с бэка по адресу `https://dummyjson.com/products`. Пока что, просто выведем их в консоль.
2. Создадим компонент (именно компонент) `ProductCard`, который будет отвечать за отрисовку карточки товаров. Он будет получать в пропсах объект с данными товара. И его задача - рендерить товар в виде карточки (`div`, с классом `productCard`), в котором будет:
 - заголовок h3 с названием товара (свойство `title`),
 - картинка с изображением (свойство `images`, оно содержит массив, берем первый элемент),
 - параграф с описанием (свойство `description`)
 - цена (свойство `price`)
 - теги (свойство `tags`). Рендерим в виде плашек (или хотя бы параграфы в строчку)

Также, имеет смысл стилизовать его (на ваше усмотрение).
3. Делаем компонент `ProductList`, он будет принимать в пропсах массив товаров, и его задача - отрисовать эти товары в виде карточек. Товары рисуем в виде сетки из 4 столбцов равной ширины.
4. Делаем так, чтобы в нашем приложении по маршруту `/products` рендерилась бы страница `ProductsPage`.
5. Добавляем параметризованный роут. Нужно сделать так, чтобы при переходе по маршруту `/products/CATEGORY_NAME`, у нас бы отображался список товаров этой категории. Его запрашиваем с бэка `https://dummyjson.com/products/category/CATEGORY_NAME`. Параметр сделайте необязательным.
6. Подготовительная задача. В компоненте `ProudctsPage`, извлеките имя категории из параметров, и отрендерите на странице в виде параграфа.
7. Теперь воспользуемся возможностью фильтрации по категориям. Нужно сделать так, чтобы на странице отображались бы только те товары, чья категория совпадает с тем, что передано в параметре. Если ничего не передано - рендерим все товары.

### Полезные ссылки
[Библиотека react-router](https://reactrouter.com/start/library/routing) - официальная документация проекта.